<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<body>

<link rel="stylesheet" type="text/css" href="style.css"/>
<script type="text/javascript"
        src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.0.1/d3.v3.min.js"></script>

<div class="plot" id="plot1"></div>
<div class="plot" id="plot3"></div>
<div class="plot" id="plot4"></div>
<div class="plot" id="plot5"></div>
<div class="plot" id="plot6"></div>

<script src="i3d3.js" type="text/javascript"></script>

<script>

console.log("hi", i3d3);

var h = 250,
    w = 280;

function testdata(n, offset) {
    return d3.range(n)
        .map(d3.random.logNormal(Math.log(30)))
        .map(function(x) { return x + (offset && offset || 0) });
}

var data = testdata(60, 200);
i3d3.plot({data: [{type: "bars",
                   bins: data,
                   color: "rosybrown",
                   range: [0, 100]},
                  {type: "bars",
                   bins: testdata(20),
                   opacity: 0.7,
                   range: [0, 100]}],
           div: "plot1",
           size: [w, h],
           xlabel: "SMT-8",
           ylabel: "N",
           extras: [{region: {min: 60, max: 80, color: "lavender"}},
                    {note: {x: 8, y: d3.max(data) * 0.8, text: "Preliminary",
                            color: "rosybrown"}}],
});


i3d3.plot({data: [{type: "bars",
                   bins: testdata(330),
                   color: "lightgrey",
                   range: [2000, 4000]}],
           div: "plot3",
           size: [w, h],
           xlabel: "Slow Monopole",
           ylabel: "Counts",
           extras: [{vbar: {pos: 2500, color: "blue"}},
                    {vbar: {pos: 3250, color: "red"}}],
});


i3d3.plot({data: [{type: "bars",
                   bins: testdata(100),
                   range: [-1, 1]}],
           div: "plot4",
           size: [w, h],
           xlabel: "sin(l)",
           ylabel: "Neutrinos",
           extras: [{hbar: {pos: 100, color: "orange"}},
                    {vbar: {pos: -0.5, color: "lightgrey"}},
                    {region: {min: -1, max: -0.5, color: "linen"}},
                    {note: {x: 0.7 * w, y: 0.4 * h, text: "Nu_e", 
                            color: "orange", units: "pixels"}}],
});


data = testdata(15);
i3d3.plot({data: [{type: "bars",
              bins: data,
              color: "lightsalmon",
              range: [500, 1500]}],
           div: "plot5",
           size: [w, h],
           xlabel: "Source Data",
           ylabel: "Entries",
           extras: [{line: {x0: 600, y0: d3.max(data) * 0.2,
                            x1: 1300, y1: d3.max(data) * 0.6,
                            color: "darkolivegreen"}},
                    {note: {x: 0.4 * w, y: 0.5 * h, text: "Bad Fit", 
                            color: "darkolivegreen", units: "pixels"}}],

});


function sample_curve(ampl, phase, noise_weight, offset, sig2) {
    return d3.range(50).map(function(i) {
        var x = 0.1 * i;
        return {x: x, y: ampl * (Math.exp(-(Math.pow(x - phase, 2)/sig2)) + 
                                 Math.random()/noise_weight + offset)};
    });
}

i3d3.plot({data: [{type: "lines",
                   values: sample_curve(200, 2, 10, 0.1, 0.4),
                   color: "blue"},
                  {type: "points",
                   values: sample_curve(200, 2, 5, 0.1, 0.4),
                   color: "lightcoral",
                   size: 1.4},
                  {type: "bars",
                   bins: testdata(15),
                   color: "lightsteelblue",
                   range: [0, 5]},
                  {type: "bars",
                   bins: testdata(30),
                   color: "goldenrod",
                   range: [2, 8]},
                  ],
             div: "plot6",
             size: [w * 2, h],
             xlabel: "Stuff",
             ylabel: "Other Stuff",
             extras: [{vbar: {pos: 2, color: "blue"}},
                      {vbar: {pos: 5, color: "red"}},
                      {note: {x: 6, y: 200,
                              text: "example",
                              style: "font-size: 20; font-style: italic;"}}]
});

</script>
</body>
</html>
